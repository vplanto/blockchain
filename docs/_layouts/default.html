<!DOCTYPE html>
<html lang="{{ page.lang | default: "uk" }}">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ page.title | default: "Lectures" }}</title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.5.0/github-markdown-light.min.css">

  <style>
    /* Центрування сторінки */
    .markdown-body {
      box-sizing: border-box;
      min-width: 200px;
      max-width: 980px;
      margin: 0 auto;
      padding: 45px;
    }
    @media (max-width: 767px) { .markdown-body { padding: 15px; } }

    /* Syntax Highlighting for Rouge (GitHub Pages) */
    .highlight { background: #ffffff; }
    .highlight .c { color: #999988; font-style: italic }
    .highlight .err { color: #a61717; background-color: #e3d2d2 }
    .highlight .k { font-weight: bold }
    .highlight .o { font-weight: bold }
    .highlight .cm { color: #999988; font-style: italic }
    .highlight .cp { color: #999999; font-weight: bold }
    .highlight .c1 { color: #999988; font-style: italic }
    .highlight .cs { color: #999999; font-weight: bold; font-style: italic }
    .highlight .gd { color: #000000; background-color: #ffdddd }
    .highlight .gd .x { color: #000000; background-color: #ffaaaa }
    .highlight .ge { font-style: italic }
    .highlight .gr { color: #aa0000 }
    .highlight .gh { color: #999999 }
    .highlight .gi { color: #000000; background-color: #ddffdd }
    .highlight .gi .x { color: #000000; background-color: #aaffaa }
    .highlight .go { color: #888888 }
    .highlight .gp { color: #555555 }
    .highlight .gs { font-weight: bold }
    .highlight .gu { color: #aaaaaa }
    .highlight .gt { color: #aa0000 }
    .highlight .kc { font-weight: bold }
    .highlight .kd { font-weight: bold }
    .highlight .kp { font-weight: bold }
    .highlight .kr { font-weight: bold }
    .highlight .kt { color: #445588; font-weight: bold }
    .highlight .m { color: #009999 }
    .highlight .s { color: #d14 }
    .highlight .na { color: #008080 }
    .highlight .nb { color: #0086B3 }
    .highlight .nc { color: #445588; font-weight: bold }
    .highlight .no { color: #008080 }
    .highlight .ni { color: #800080 }
    .highlight .ne { color: #990000; font-weight: bold }
    .highlight .nf { color: #990000; font-weight: bold }
    .highlight .nn { color: #555555 }
    .highlight .nt { color: #000080 }
    .highlight .nv { color: #008080 }
    .highlight .ow { font-weight: bold }
    .highlight .w { color: #bbbbbb }
    .highlight .mf { color: #009999 }
    .highlight .mh { color: #009999 }
    .highlight .mi { color: #009999 }
    .highlight .mo { color: #009999 }
    .highlight .sb { color: #d14 }
    .highlight .sc { color: #d14 }
    .highlight .sd { color: #d14 }
    .highlight .s2 { color: #d14 }
    .highlight .se { color: #d14 }
    .highlight .sh { color: #d14 }
    .highlight .si { color: #d14 }
    .highlight .sx { color: #d14 }
    .highlight .sr { color: #009926 }
    .highlight .s1 { color: #d14 }
    .highlight .ss { color: #990073 }
    .highlight .bp { color: #999999 }
    .highlight .vc { color: #008080 }
    .highlight .vg { color: #008080 }
    .highlight .vi { color: #008080 }
    .highlight .il { color: #009999 }
  </style>

  <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']]
      },
      svg: { fontCache: 'global' }
    };
  </script>
  <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>
  <article class="markdown-body">
    {{ content }}
  </article>
  <script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';

    // Налаштування
    mermaid.initialize({ startOnLoad: false });

    // Знаходимо всі блоки коду з мовою mermaid і перетворюємо їх
    document.addEventListener('DOMContentLoaded', () => {
      const mermaidBlocks = document.querySelectorAll('pre code.language-mermaid');

      mermaidBlocks.forEach((block) => {
        // Отримуємо сам код діаграми
        const content = block.textContent;
        // Створюємо новий div
        const div = document.createElement('div');
        div.className = 'mermaid';
        div.textContent = content;

        // Замінюємо <pre><code> на <div class="mermaid">
        const pre = block.closest('pre');
        if (pre) {
          pre.parentNode.replaceChild(div, pre);
        }
      });

      // Запускаємо рендер
      mermaid.run();
    });
  </script>
</body>
</html>
