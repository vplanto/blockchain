# –õ–µ–∫—Ü—ñ—è 3. –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ Ethereum: —Ä–∞—Ö—É–Ω–∫–∏, EVM, –≥–∞–∑

**–ú–µ—Ç–∞:** –ó—Ä–æ–∑—É–º—ñ—Ç–∏, —á–æ–º—É Ethereum –æ–±—Ä–∞–ª–∏ –º–æ–¥–µ–ª—å —Ä–∞—Ö—É–Ω–∫—ñ–≤ –∑–∞–º—ñ—Å—Ç—å UTXO —ñ —è–∫ –ø—Ä–∞—Ü—é—î –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∫–æ–¥—É (EVM, –≥–∞–∑).

**–î–∂–µ—Ä–µ–ª–æ:** Ethereum Yellow Paper (Gavin Wood).

---

## –ü–∏—Ç–∞–Ω–Ω—è –¥–ª—è –æ–±–≥–æ–≤–æ—Ä–µ–Ω–Ω—è

1. –Ø–∫ –±–∏ –≤–∏ –¥–æ–¥–∞–ª–∏ –≤ Bitcoin –ª–æ–≥—ñ–∫—É —Ç–∏–ø—É "–ø–µ—Ä–µ–∫–∞–∑ –ª–∏—à–µ —è–∫—â–æ –¥–≤–æ—î –∑ —Ç—Ä—å–æ—Ö –ø—ñ–¥–ø–∏—Å–∞–ª–∏"? –ß–∏ –≤–∏—Å—Ç–∞—á–∞—î —Ç—ñ–ª—å–∫–∏ —Å–∫—Ä–∏–ø—Ç—ñ–≤?
2. –ù–∞–≤—ñ—â–æ –≤ Ethereum –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ "–±–∞–ª–∞–Ω—Å" —ñ "nonce" –¥–ª—è –∫–æ–∂–Ω–æ—ó –∞–¥—Ä–µ—Å–∏?
3. –•—Ç–æ –ø–ª–∞—Ç–∏—Ç—å –∑–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∫–æ–¥—É –Ω–∞ –±–ª–æ–∫—á–µ–π–Ω—ñ —ñ —á–æ–º—É —Ü–µ –Ω–µ –º–æ–∂–µ –±—É—Ç–∏ –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ?

---

## 1. –ú–æ–¥–µ–ª—å —Ä–∞—Ö—É–Ω–∫—ñ–≤ (Account model)

–£ Ethereum —î –≥–ª–æ–±–∞–ª—å–Ω–∏–π —Å—Ç–∞–Ω: —Å–ø–∏—Å–æ–∫ –∞–¥—Ä–µ—Å (accounts) —ñ–∑ –ø–æ–ª—è–º–∏ –±–∞–ª–∞–Ω—Å (balance), nonce (–ª—ñ—á–∏–ª—å–Ω–∏–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π), –∫–æ–¥ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É (—è–∫—â–æ —î), –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è (storage). –¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ—è –∑–º—ñ–Ω—é—î —Ü–µ–π —Å—Ç–∞–Ω: –ø–µ—Ä–µ–∫–∞–∑–∏ –∑–º—ñ–Ω—é—é—Ç—å –±–∞–ª–∞–Ω—Å–∏, –≤–∏–∫–ª–∏–∫ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É –≤–∏–∫–æ–Ω—É—î –π–æ–≥–æ –∫–æ–¥ —ñ –º–æ–∂–µ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ storage.

–ß–æ–º—É –Ω–µ UTXO? –°–∫–ª–∞–¥–Ω—ñ —É–º–æ–≤–∏ (–º—É–ª—å—Ç–∏–ø—ñ–¥–ø–∏—Å, —á–∞—Å–æ–≤—ñ –∑–∞–º–∫–∏, —É–º–æ–≤–Ω—ñ –≤–∏–ø–ª–∞—Ç–∏) —É —Å–∫—Ä–∏–ø—Ç–∞—Ö Bitcoin –æ–±–º–µ–∂–µ–Ω—ñ –π –Ω–µ–∑—Ä—É—á–Ω—ñ –¥–ª—è –¥–æ–≤—ñ–ª—å–Ω–æ–≥–æ –∫–æ–¥—É. –ú–æ–¥–µ–ª—å —Ä–∞—Ö—É–Ω–∫—ñ–≤ –∑ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏ –¥–æ–∑–≤–æ–ª—è—î –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ —Å—Ç–∞–Ω —ñ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ —Å–∫–ª–∞–¥–Ω—É –ª–æ–≥—ñ–∫—É. –¶—ñ–Ω–∞ ‚Äî –∫–æ–∂–µ–Ω –≤—É–∑–æ–ª –ø–æ–≤–∏–Ω–µ–Ω –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞—Ç–∏ —ñ –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –≥–ª–æ–±–∞–ª—å–Ω–∏–π —Å—Ç–∞–Ω.

---

## 2. EVM (Ethereum Virtual Machine)

EVM ‚Äî —Å—Ç–µ–∫–æ–≤–∞ –º–∞—à–∏–Ω–∞ –∑ –±–∞–π—Ç–∫–æ–¥–æ–º. –ö–æ–Ω—Ç—Ä–∞–∫—Ç ‚Äî —Ü–µ –∫–æ–¥ (bytecode), —è–∫–∏–π –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –ø—Ä–∏ –≤–∏–∫–ª–∏–∫—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—î—é –∞–±–æ —ñ–Ω—à–∏–º –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–º. –ö–æ–∂–Ω–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è (ADD, SSTORE, CALL —Ç–æ—â–æ) –∫–æ—à—Ç—É—î –ø–µ–≤–Ω—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å **–≥–∞–∑—É**. –¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ—è –≤–∫–∞–∑—É—î gas limit —ñ gas price; —è–∫—â–æ –≥–∞–∑—É –Ω–µ –≤–∏—Å—Ç–∞—á–∞—î –¥–æ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è, –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –≤—ñ–¥–∫–æ—á—É—î—Ç—å—Å—è (revert), –∞ –≥–∞–∑ –∑–∞ —Å–ø—Ä–æ–±–∏ –≤—Å–µ –æ–¥–Ω–æ —Å–ø–ª–∞—á—É—î—Ç—å—Å—è.

–¶–µ –∑–∞—Ö–∏—â–∞—î –º–µ—Ä–µ–∂—É –≤—ñ–¥ –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω–∏—Ö —Ü–∏–∫–ª—ñ–≤ —ñ "–≤–∞–∂–∫–∏—Ö" –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ñ–≤: –ø–ª–∞—Ç–∏—à –∑–∞ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è. –û–ø–µ—Ä–∞—Ü—ñ—ó –∑—ñ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è–º (SSTORE) –¥–æ—Ä–æ–∂—á—ñ –∑–∞ –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫—É, —â–æ–± –æ–±–º–µ–∂–∏—Ç–∏ —Ä–æ–∑–º—ñ—Ä —Å—Ç–∞–Ω—É.

---

## 3. Gas —ñ fee

Gas ‚Äî –æ–¥–∏–Ω–∏—Ü—è "—Ä–æ–±–æ—Ç–∏" EVM. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑–∞–¥–∞—î gas price (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —É gwei). Fee = gas used √ó gas price. –ú–∞–π–Ω–µ—Ä (–≤ PoW) –∞–±–æ –≤–∞–ª—ñ–¥–∞—Ç–æ—Ä (–≤ PoS) –æ—Ç—Ä–∏–º—É—î —Ü—é –ø–ª–∞—Ç—É. –ß–∏–º –≤–∏—â–∞ —Ü—ñ–Ω–∞, —Ç–∏–º —à–≤–∏–¥—à–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—é –≤–∫–ª—é—á–∞—Ç—å —É –±–ª–æ–∫ (–ø—Ä–∏ –æ–±–º–µ–∂–µ–Ω–æ–º—É –º—ñ—Å—Ü—ñ –≤ –±–ª–æ—Ü—ñ).

---

## 4. State Trie

–°—Ç–∞–Ω Ethereum (–±–∞–ª–∞–Ω—Å–∏, nonce, –∫–æ–¥, storage –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ñ–≤) –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ö –Ω–∞ –æ—Å–Ω–æ–≤—ñ Merkle Patricia Trie. –ö–æ—Ä—ñ–Ω—å —Ü—å–æ–≥–æ –¥–µ—Ä–µ–≤–∞ (state root) –≤—Ö–æ–¥–∏—Ç—å —É –∑–∞–≥–æ–ª–æ–≤–æ–∫ –±–ª–æ–∫—É. –ë—É–¥—å-—è–∫–∞ –∑–º—ñ–Ω–∞ —Å—Ç–∞–Ω—É –∑–º—ñ–Ω—é—î –∫–æ—Ä—ñ–Ω—å. –¢–æ–º—É –º–æ–∂–Ω–∞ –¥–æ–≤–µ—Å—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –±–∞–ª–∞–Ω—Å—É –∞–±–æ –∫–æ–º—ñ—Ä–∫–∏ storage –±–µ–∑ –ø–µ—Ä–µ–¥–∞—á—ñ –≤—Å—å–æ–≥–æ —Å—Ç–∞–Ω—É (Merkle proof).

---

## 5. –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –∑ Bitcoin (–∫–æ—Ä–æ—Ç–∫–æ)

| –ê—Å–ø–µ–∫—Ç | Bitcoin | Ethereum |
|--------|---------|----------|
| –ú–æ–¥–µ–ª—å –¥–∞–Ω–∏—Ö | UTXO | –†–∞—Ö—É–Ω–∫–∏ + —Å—Ç–∞–Ω –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ñ–≤ |
| –°–∫—Ä–∏–ø—Ç/–∫–æ–¥ | –û–±–º–µ–∂–µ–Ω–∏–π Script | –ü–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–∏–π –±–∞–π—Ç–∫–æ–¥ (EVM) |
| "–ì—Ä–æ—à—ñ" | –õ–∏—à–µ –ø–µ—Ä–µ–∫–∞–∑–∏ –≤–∏—Ö–æ–¥—ñ–≤ | –ü–µ—Ä–µ–∫–∞–∑–∏ + –≤–∏–∫–ª–∏–∫–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ñ–≤ (gas) |
| –°—Ç–∞–Ω | –ù–µ–º–∞—î –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å—É | –ì–ª–æ–±–∞–ª—å–Ω–∏–π state trie |

---

## –ü–∏—Ç–∞–Ω–Ω—è —Ç–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ (–µ–∫–∑–∞–º–µ–Ω–∞—Ü—ñ–π–Ω–∏–π –±–ª–æ–∫)

**–ü1.** –ß–æ–º—É –≤ Ethereum –æ–±—Ä–∞–ª–∏ –º–æ–¥–µ–ª—å —Ä–∞—Ö—É–Ω–∫—ñ–≤, –∞ –Ω–µ UTXO?

**–í1.** Ethereum –º–∞—î –∑–∞ –º–µ—Ç—É –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –¥–æ–≤—ñ–ª—å–Ω—É –ª–æ–≥—ñ–∫—É (—Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∏). –ú–æ–¥–µ–ª—å —Ä–∞—Ö—É–Ω–∫—ñ–≤ –∑—ñ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è–º (storage) —ñ –∫–æ–¥–æ–º –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É –ø—Ä–æ—Å—Ç—ñ—à–∞ –¥–ª—è —Å–∫–ª–∞–¥–Ω–∏—Ö —É–º–æ–≤ —ñ —Å—Ç–∞–Ω—É. UTXO –∑ —Å–∫—Ä–∏–ø—Ç–∞–º–∏ (—è–∫ —É Bitcoin) –Ω–µ —Ä–æ–∑—Ä–∞—Ö–æ–≤–∞–Ω—ñ –Ω–∞ —Ç–∞–∫–∏–π –æ–±—Å—è–≥ –ª–æ–≥—ñ–∫–∏ —Ç–∞ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö.

---

**–ü2.** –©–æ —Ç–∞–∫–µ –≥–∞–∑ (gas) —ñ –Ω–∞–≤—ñ—â–æ –≤—ñ–Ω –ø–æ—Ç—Ä—ñ–±–µ–Ω?

**–í2.** Gas ‚Äî –æ–¥–∏–Ω–∏—Ü—è –≤–∏–º—ñ—Ä—É "—Ä–æ–±–æ—Ç–∏" EVM. –ö–æ–∂–Ω–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è –º–∞—î —Ü—ñ–Ω—É –≤ –≥–∞–∑—ñ. –¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ—è –≤–∫–∞–∑—É—î gas limit —ñ gas price. –¶–µ –æ–±–º–µ–∂—É—î —Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è (–Ω–µ–º–∞—î –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω–∏—Ö —Ü–∏–∫–ª—ñ–≤ –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ) —ñ –∑–º—É—à—É—î –ø–ª–∞—Ç–Ω–∏–∫–∞ –ø–ª–∞—Ç–∏—Ç–∏ –∑–∞ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è —Ç–∞ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è. Fee = gas used √ó gas price –π–¥–µ –º–∞–π–Ω–µ—Ä—É/–≤–∞–ª—ñ–¥–∞—Ç–æ—Ä—É.

---

**–ü3.** –©–æ —Ç–∞–∫–µ EVM —ñ —è–∫–∏–π —Ç–∏–ø –º–∞—à–∏–Ω–∏ —Ü–µ?

**–í3.** EVM (Ethereum Virtual Machine) ‚Äî –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–∞ –º–∞—à–∏–Ω–∞ –∑—ñ —Å—Ç–µ–∫–æ–≤–æ—é –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–æ—é, —â–æ –≤–∏–∫–æ–Ω—É—î –±–∞–π—Ç–∫–æ–¥ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ñ–≤. –ö–æ–∂–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –º–∞—î –≤–∞—Ä—Ç—ñ—Å—Ç—å —É –≥–∞–∑—ñ. –í—É–∑–ª–∏ –≤–∏–∫–æ–Ω—É—é—Ç—å –æ–¥–∏–Ω —ñ —Ç–æ–π —Å–∞–º–∏–π –∫–æ–¥ —ñ –ø—Ä–∏—Ö–æ–¥—è—Ç—å –¥–æ –æ–¥–Ω–æ–≥–æ —Å—Ç–∞–Ω—É; —è–∫—â–æ –≥–∞–∑—É –Ω–µ –≤–∏—Å—Ç–∞—á–∞—î, –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –≤—ñ–¥–∫–æ—á—É—î—Ç—å—Å—è (revert).

---

**–ü4.** –Ø–∫ –ø–æ–≤‚Äô—è–∑–∞–Ω—ñ state root —ñ Merkle (Patricia) trie –≤ Ethereum?

**–í4.** –ì–ª–æ–±–∞–ª—å–Ω–∏–π —Å—Ç–∞–Ω (–±–∞–ª–∞–Ω—Å–∏, nonce, –∫–æ–¥, storage) –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ö –Ω–∞ –æ—Å–Ω–æ–≤—ñ Merkle Patricia Trie. –ö–æ—Ä—ñ–Ω—å —Ü—å–æ–≥–æ –¥–µ—Ä–µ–≤–∞ (state root) –∑–∞–ø–∏—Å—É—î—Ç—å—Å—è –≤ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –±–ª–æ–∫—É. –ó–º—ñ–Ω–∞ –±—É–¥—å-—è–∫–æ–≥–æ –∑–Ω–∞—á–µ–Ω–Ω—è –∑–º—ñ–Ω—é—î –∫–æ—Ä—ñ–Ω—å. –ó–∞ –¥–æ–ø–æ–º–æ–≥–æ—é Merkle proof –º–æ–∂–Ω–∞ –¥–æ–≤–µ—Å—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –∫–æ–º—ñ—Ä–∫–∏ —Å—Ç–∞–Ω—É –±–µ–∑ –ø–µ—Ä–µ–¥–∞—á—ñ –≤—Å—å–æ–≥–æ —Å—Ç–∞–Ω—É.

---

## üéì –Ü–Ω–∂–µ–Ω–µ—Ä–Ω–∏–π –º—ñ–Ω—ñ-–∫–µ–π—Å (–Ω–∞ 1 –±–∞–ª)

–í–∏ –Ω–∞–ø–∏—Å–∞–ª–∏ –±–æ—Ç, —è–∫–∏–π –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —Ñ—É–Ω–∫—Ü—ñ—ó `transfer` –º–∏—Ç—Ç—î–≤–æ —Ä–æ–±–∏—Ç—å –∞—Ä–±—ñ—Ç—Ä–∞–∂ –º—ñ–∂ –¥–≤–æ–º–∞ –ø—É–ª–∞–º–∏ –ª—ñ–∫–≤—ñ–¥–Ω–æ—Å—Ç—ñ –Ω–∞ Uniswap. –í–∏ –∑–∞–ø—É—Å—Ç–∏–ª–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—é, –≤–∫–∞–∑–∞–≤—à–∏ Gas Limit: 21000 —ñ –≤–∏—Å–æ–∫–∏–π Gas Price. –¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ—è —à–≤–∏–¥–∫–æ –ø–æ—Ç—Ä–∞–ø–∏–ª–∞ –≤ –±–ª–æ–∫, –∞–ª–µ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—è –ø–æ–º–∏–ª–∫–æ—é `Out of Gas`.
**–ü–∏—Ç–∞–Ω–Ω—è:** –ß–æ–º—É 21000 –≥–∞–∑—É –≤–∏—è–≤–∏–ª–æ—Å—è –Ω–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ, —ñ —á–æ–º—É –º–∞–π–Ω–µ—Ä –≤—Å–µ –æ–¥–Ω–æ —Å–ø–∏—Å–∞–≤ –∑ –≤–∞—Å –∫–æ–º—ñ—Å—ñ—é –≤ –µ—Ñ—ñ—Ä—ñ (ETH) –∑–∞ "–ø—Ä–æ–≤–∞–ª–µ–Ω—É" —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—é?
