# –õ–µ–∫—Ü—ñ—è 5. –°–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∏ —Ç–∞ Solidity: —á–∏—Ç–∞—Ç–∏ –∫–æ–¥ —ñ —Ä–æ–∑—É–º—ñ—Ç–∏ –∫–æ–Ω—Ü–µ–ø—Ç–∏

**–ú–µ—Ç–∞:** –ù–∞–≤—á–∏—Ç–∏—Å—è —á–∏—Ç–∞—Ç–∏ Solidity-–∫–æ–¥ —ñ —Ä–æ–∑—É–º—ñ—Ç–∏ –æ—Å–Ω–æ–≤–Ω—ñ –∫–æ–Ω—Ü–µ–ø—Ç–∏: —Å—Ç–∞–Ω, –≤–∏–∫–ª–∏–∫–∏, –≥–∞–∑, –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏, –ø–∞—Ç–µ—Ä–Ω–∏ –±–µ–∑–ø–µ–∫–∏.

–ü—Ä–∞–∫—Ç–∏—á–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ –≤–∑—è—Ç–æ –∑ –ø–∞–ø–∫–∏ [solidity](https://github.com/vplanto/blockchain/tree/main/solidity) —Ü—å–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é —ñ —Ä–æ–∑—Ä–∞—Ö–æ–≤–∞–Ω—ñ –Ω–∞ —Ä–æ–±–æ—Ç—É –≤ [Remix IDE](https://remix.ethereum.org/) (–æ–Ω–ª–∞–π–Ω, –±–µ–∑ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è).

---

## –ü–∏—Ç–∞–Ω–Ω—è –¥–ª—è –æ–±–≥–æ–≤–æ—Ä–µ–Ω–Ω—è

1. –©–æ —Ç–∞–∫–µ "–∫–æ–Ω—Ç—Ä–∞–∫—Ç" —É –±–ª–æ–∫—á–µ–π–Ω—ñ: —Ö—Ç–æ –π–æ–≥–æ –≤–∏–∫–æ–Ω—É—î —ñ —Ö—Ç–æ –ø–ª–∞—Ç–∏—Ç—å –∑–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è?
2. –ß–æ–º—É –≤ –∫–æ–¥—ñ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É –Ω–µ –º–æ–∂–Ω–∞ –ø—Ä–æ—Å—Ç–æ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ "–∑–∞—á–µ–∫–∞—Ç–∏ 1 –≥–æ–¥–∏–Ω—É" –∞–±–æ "–∑–∞–ø–∏—Ç–∞—Ç–∏ API –ø–æ–≥–æ–¥–∏"?
3. –Ø–∫ –∫–æ–Ω—Ç—Ä–∞–∫—Ç "–ø–∞–º‚Äô—è—Ç–∞—î" –¥–∞–Ω—ñ –º—ñ–∂ –≤–∏–∫–ª–∏–∫–∞–º–∏?

---

## 1. –î–µ –∂–∏–≤—É—Ç—å –ø—Ä–∏–∫–ª–∞–¥–∏ —ñ —è–∫ —ó—Ö –≤—ñ–¥–∫—Ä–∏—Ç–∏

- **–ö–æ–¥:** –ø–∞–ø–∫–∞ [solidity](https://github.com/vplanto/blockchain/tree/main/solidity) —É —Ü—å–æ–º—É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó. –§–∞–π–ª–∏: `HelloWorld_v1.sol`, `HelloWorld_v2_SelfDestruct.sol`, `Voter_v1.sol` ‚Ä¶ `Voter_v4_VoteByString.sol`.
- **–°–µ—Ä–µ–¥–æ–≤–∏—â–µ:** [Remix IDE](https://remix.ethereum.org/). –í—ñ–¥–∫—Ä–∏–π—Ç–µ —Ñ–∞–π–ª (File ‚Üí Open, –∞–±–æ –≤—Å—Ç–∞–≤—Ç–µ –∫–æ–¥), –≤–∏–±–µ—Ä—ñ—Ç—å –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, 0.8.x), –∑–±–µ—Ä—ñ—Ç—å (Compile), –∑–∞–ø—É—Å—Ç—ñ—Ç—å –Ω–∞ –≤—ñ—Ä—Ç—É–∞–ª—å–Ω—ñ–π –Ω–æ–¥—ñ (Deploy —É –≤–∫–ª–∞–¥—Ü—ñ Deploy & run transactions).

---

## 2. HelloWorld: —Å—Ç–∞–Ω —ñ –≤–∏–∫–ª–∏–∫–∏

–ü—Ä–∏–∫–ª–∞–¥: `HelloWorld_v1.sol`.

```solidity
contract HelloWorld {
    uint private value;

    function setValue(uint newValue) public {
        value = newValue;
    }

    function getValue() public view returns (uint) {
        return value;
    }
}
```

–©–æ —Ç—É—Ç –≤–∞–∂–ª–∏–≤–æ: –∫–æ–Ω—Ç—Ä–∞–∫—Ç –º–∞—î **—Å—Ç–∞–Ω** ‚Äî –∑–º—ñ–Ω–Ω—É `value`, —â–æ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ storage. `setValue` –∑–º—ñ–Ω—é—î —Å—Ç–∞–Ω (–∫–æ—à—Ç—É—î –≥–∞–∑); `getValue` –ª–∏—à–µ —á–∏—Ç–∞—î (view, –Ω–µ –∑–º—ñ–Ω—é—î —Å—Ç–∞–Ω, –≤–∏–∫–ª–∏–∫ –±–µ–∑ –ø–ª–∞—Ç–∏ –∑–∑–æ–≤–Ω—ñ). –ö–æ–∂–µ–Ω –≤–∏–∫–ª–∏–∫ —Ñ—É–Ω–∫—Ü—ñ—ó ‚Äî —Ü–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—è (–∞–±–æ –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π –≤–∏–∫–ª–∏–∫ –∑ —ñ–Ω—à–æ—ó —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó). –ö–æ–Ω—Ç—Ä–∞–∫—Ç –Ω–µ "–∫—Ä—É—Ç–∏—Ç—å—Å—è" —Å–∞–º –ø–æ —Å–æ–±—ñ, –≤—ñ–Ω —Ä–µ–∞–≥—É—î –ª–∏—à–µ –Ω–∞ –≤–∏–∫–ª–∏–∫–∏.

---

## 3. Selfdestruct —ñ –Ω–µ–∑–≤–æ—Ä–æ—Ç–Ω—ñ—Å—Ç—å

–ü—Ä–∏–∫–ª–∞–¥: `HelloWorld_v2_SelfDestruct.sol` ‚Äî –¥–æ–¥–∞–Ω–æ —Ñ—É–Ω–∫—Ü—ñ—é `remove()`, —è–∫–∞ –≤–∏–∫–ª–∏–∫–∞—î `selfdestruct(payable(address(0)))`. –ü—ñ—Å–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç –ø–µ—Ä–µ—Å—Ç–∞—î —ñ—Å–Ω—É–≤–∞—Ç–∏, –∞ –∑–∞–ª–∏—à–æ–∫ ETH (—è–∫—â–æ –±—É–≤) –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è –Ω–∞ –≤–∫–∞–∑–∞–Ω—É –∞–¥—Ä–µ—Å—É. –¶–µ –Ω–µ–∑–≤–æ—Ä–æ—Ç–Ω–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è: –Ω–∞ –ª–∞–Ω—Ü—é–≥—É —ó—ó –Ω–µ –≤—ñ–¥–∫–æ—Ç–∏—Ç–∏.

---

## 4. Voter: –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä, –º–∞—Å–∏–≤–∏, –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏

–ü—Ä–∏–∫–ª–∞–¥: `Voter_v1.sol`.

- **constructor(string[] memory _options):** –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –¥–µ–ø–ª–æ—ó. –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î —Å–ø–∏—Å–æ–∫ –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤ —ñ –º–∞—Å–∏–≤ –≥–æ–ª–æ—Å—ñ–≤.
- **vote(uint option):** –∑–±—ñ–ª—å—à—É—î –ª—ñ—á–∏–ª—å–Ω–∏–∫ –¥–ª—è –æ–±—Ä–∞–Ω–æ–≥–æ –≤–∞—Ä—ñ–∞–Ω—Ç—É. `require(0 <= option && option < options.length, "Invalid option")` ‚Äî –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–≤–µ–¥–µ–Ω–Ω—è; –ø—Ä–∏ –Ω–µ–≤–∏–∫–æ–Ω–∞–Ω–Ω—ñ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—è –≤—ñ–¥–∫–æ—á—É—î—Ç—å—Å—è (revert).
- **getOptions / getVotes:** —á–∏—Ç–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö (view).

–ö–æ–Ω—Ü–µ–ø—Ç–∏: –∫–æ–Ω—Ç—Ä–∞–∫—Ç —è–∫ "–æ–±‚Äô—î–∫—Ç" –∑—ñ —Å—Ç–∞–Ω–æ–º; –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —á–µ—Ä–µ–∑ `require`; –≥–∞–∑ –∑–∞ –∑–∞–ø–∏—Å (votes[option] += 1) –ø–ª–∞—Ç–∏—Ç—å —Ç–æ–π, —Ö—Ç–æ –≤–∏–∫–ª–∏–∫–∞—î `vote`.

---

## 5. –û–¥–∏–Ω –≥–æ–ª–æ—Å –Ω–∞ –∞–¥—Ä–µ—Å—É: mapping

–ü—Ä–∏–∫–ª–∞–¥: `Voter_v2_OneVoteOnly.sol`.

- `mapping(address => bool) hasVoted` ‚Äî –¥–ª—è –∫–æ–∂–Ω–æ—ó –∞–¥—Ä–µ—Å–∏ –∑–±–µ—Ä—ñ–≥–∞—î–º–æ, —á–∏ –≤–∂–µ –≥–æ–ª–æ—Å—É–≤–∞–ª–∞.
- –£ `vote`: `require(!hasVoted[msg.sender], "Already voted")`; –ø—ñ—Å–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è `recordVote(option)`, –¥–µ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î—Ç—å—Å—è `hasVoted[msg.sender] = true` —ñ –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è –º–∞—Å–∏–≤ –≥–æ–ª–æ—Å—ñ–≤.

–ö–æ–Ω—Ü–µ–ø—Ç–∏: `msg.sender` ‚Äî –∞–¥—Ä–µ—Å–∞, —â–æ –≤–∏–∫–ª–∏–∫–∞–ª–∞ —Ñ—É–Ω–∫—Ü—ñ—é; mapping –¥–ª—è "–æ–¥–∏–Ω –≥–æ–ª–æ—Å –Ω–∞ –∞–¥—Ä–µ—Å—É"; –ø–æ—Ä—è–¥–æ–∫: —Å–ø–æ—á–∞—Ç–∫—É –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏, –ø–æ—Ç—ñ–º –∑–º—ñ–Ω–∞ —Å—Ç–∞–Ω—É (–ø—ñ–¥—Ö—ñ–¥ Checks-Effects-Interactions).

---

## 6. –ì–æ–ª–æ—Å—É–≤–∞–Ω–Ω—è –∑–∞ —Ä—è–¥–∫–æ–º —ñ –≤–∞—Ä—Ç—ñ—Å—Ç—å –≥–∞–∑—É

–£ `Voter_v3_StringOptions.sol` —î –ø–µ—Ä–µ–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è `vote(string memory option)`: –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è —Ä—è–¥–∫—ñ–≤ —á–µ—Ä–µ–∑ `keccak256(bytes(a)) == keccak256(bytes(b))`, —Ü–∏–∫–ª –ø–æ –≤—Å—ñ—Ö options. –¶–µ –¥–æ—Ä–æ–∂—á–µ –∑–∞ –≥–∞–∑, –Ω—ñ–∂ –≥–æ–ª–æ—Å—É–≤–∞–Ω–Ω—è –∑–∞ —ñ–Ω–¥–µ–∫—Å–æ–º (uint). –£ `Voter_v4_VoteByString.sol` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è `mapping(string => OptionPos) posOfOption`, –∑–∞–ø–æ–≤–Ω–µ–Ω–∏–π —É –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ñ: –ø–æ—à—É–∫ –∑–∞ —Ä—è–¥–∫–æ–º —Å—Ç–∞—î O(1) –∑–∞–º—ñ—Å—Ç—å —Ü–∏–∫–ª—É ‚Äî –ø—Ä–∏–∫–ª–∞–¥ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó –≥–∞–∑—É —á–µ—Ä–µ–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–∏—Ö.

---

## 7. –ë–µ–∑–ø–µ–∫–∞: Reentrancy —ñ Checks-Effects-Interactions

–£ –ª–µ–∫—Ü—ñ—ó —Ç–∞ –≤ Case Studies (The DAO) –∑–≥–∞–¥–∞–Ω–æ: –Ω–µ–±–µ–∑–ø–µ—á–Ω–æ —Å–ø–æ—á–∞—Ç–∫—É –≤—ñ–¥–ø—Ä–∞–≤–ª—è—Ç–∏ –∫–æ—à—Ç–∏ –∑–æ–≤–Ω—ñ (external call), –∞ –ø–æ—Ç—ñ–º –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π —Å—Ç–∞–Ω. –ö–æ–Ω—Ç—Ä–∞–∫—Ç –æ–¥–µ—Ä–∂—É–≤–∞—á–∞ –º–æ–∂–µ —É callback –∑–Ω–æ–≤—É –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –≤–∞—à—É —Ñ—É–Ω–∫—Ü—ñ—é —ñ "–ø–æ–≤—Ç–æ—Ä–∏—Ç–∏" –≤—Ö—ñ–¥ (reentrancy). –ü–∞—Ç–µ—Ä–Ω: —Å–ø–æ—á–∞—Ç–∫—É –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ (checks), –ø–æ—Ç—ñ–º –∑–º—ñ–Ω–∞ —Å—Ç–∞–Ω—É (effects), –≤ –∫—ñ–Ω—Ü—ñ ‚Äî –∑–æ–≤–Ω—ñ—à–Ω—ñ –≤–∏–∫–ª–∏–∫–∏ (interactions). –ü–ª—é—Å –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –º–æ–¥–∏—Ñ—ñ–∫–∞—Ç–æ—Ä—ñ–≤ –Ω–∞ –∫—à—Ç–∞–ª—Ç `nonReentrant` (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, OpenZeppelin).

---

## 8. –©–æ —Å—Ç—É–¥–µ–Ω—Ç –ø–æ–≤–∏–Ω–µ–Ω –≤–º—ñ—Ç–∏ –ø—ñ—Å–ª—è –ª–µ–∫—Ü—ñ—ó

- –í—ñ–¥–∫—Ä–∏—Ç–∏ –ø—Ä–∏–∫–ª–∞–¥ —É Remix, —Å–∫–æ–º–ø—ñ–ª—é–≤–∞—Ç–∏, –∑–∞–¥–µ–ø–ª–æ—ó—Ç–∏ –Ω–∞ –≤—ñ—Ä—Ç—É–∞–ª—å–Ω—ñ–π –Ω–æ–¥—ñ.
- –ü–æ—è—Å–Ω–∏—Ç–∏: –¥–µ —Å—Ç–∞–Ω (storage), —Ö—Ç–æ –ø–ª–∞—Ç–∏—Ç—å –≥–∞–∑, –Ω–∞–≤—ñ—â–æ `require` —ñ —â–æ —Ç–∞–∫–µ revert.
- –†–æ–∑—Ä—ñ–∑–Ω—è—Ç–∏: view/pure (—á–∏—Ç–∞–Ω–Ω—è) —ñ —Ñ—É–Ω–∫—Ü—ñ—ó, —â–æ –∑–º—ñ–Ω—é—é—Ç—å —Å—Ç–∞–Ω.
- –ü–æ—è—Å–Ω–∏—Ç–∏ —Ä—ñ–∑–Ω–∏—Ü—é –º—ñ–∂ Voter_v1 (–±–µ–∑ –æ–±–º–µ–∂–µ–Ω–Ω—è –≥–æ–ª–æ—Å—ñ–≤) —ñ Voter_v2 (–æ–¥–∏–Ω –≥–æ–ª–æ—Å –Ω–∞ –∞–¥—Ä–µ—Å—É); –º—ñ–∂ v3 (–ø–æ—à—É–∫ –ø–æ —Ä—è–¥–∫—É —Ü–∏–∫–ª–æ–º) —ñ v4 (mapping –¥–ª—è O(1)).
- –ó–Ω–∞—Ç–∏ –ø—Ä–æ selfdestruct —ñ –ø—Ä–æ –ø–∞—Ç–µ—Ä–Ω Checks-Effects-Interactions —É –∫–æ–Ω—Ç–µ–∫—Å—Ç—ñ reentrancy.

---

## –ü–∏—Ç–∞–Ω–Ω—è —Ç–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ (–µ–∫–∑–∞–º–µ–Ω–∞—Ü—ñ–π–Ω–∏–π –±–ª–æ–∫)

**–ü1.** –•—Ç–æ –ø–ª–∞—Ç–∏—Ç—å –∑–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ—ó —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—É —ñ —è–∫ —Ü–µ –ø–æ–≤‚Äô—è–∑–∞–Ω–æ –∑ –≥–∞–∑–æ–º?

**–í1.** –ó–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ø–ª–∞—Ç–∏—Ç—å —Ç–æ–π, —Ö—Ç–æ —ñ–Ω—ñ—Ü—ñ—é–≤–∞–≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—é (–≤–∏–∫–ª–∏–∫–∞–≤ —Ñ—É–Ω–∫—Ü—ñ—é): –≤—ñ–Ω –∑–∞–¥–∞—î gas limit —ñ gas price. –í–∏—Ç—Ä–∞—á–µ–Ω–∏–π –≥–∞–∑ —Å–ø–∏—Å—É—î—Ç—å—Å—è –∑ –π–æ–≥–æ —Ä–∞—Ö—É–Ω–∫—É. –Ø–∫—â–æ –≥–∞–∑—É –Ω–µ –≤–∏—Å—Ç–∞—á–∏–ª–æ, –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –≤—ñ–¥–∫–æ—á—É—î—Ç—å—Å—è (revert), –∞ –≤–∂–µ –≤–∏—Ç—Ä–∞—á–µ–Ω–∏–π –≥–∞–∑ –Ω–µ –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è.

---

**–ü2.** –ù–∞–≤—ñ—â–æ –≤ Solidity –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å `require`? –©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è, —è–∫—â–æ —É–º–æ–≤–∞ –Ω–µ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è?

**–í2.** `require(—É–º–æ–≤–∞, "–ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è")` –ø–µ—Ä–µ–≤—ñ—Ä—è—î —É–º–æ–≤—É –ø–µ—Ä–µ–¥ –ø–æ–¥–∞–ª—å—à–∏–º –≤–∏–∫–æ–Ω–∞–Ω–Ω—è–º. –Ø–∫—â–æ —É–º–æ–≤–∞ false, –ø–æ—Ç–æ—á–Ω–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—è –Ω–µ–≥–∞–π–Ω–æ –ø–µ—Ä–µ—Ä–∏–≤–∞—î—Ç—å—Å—è (revert): –∑–º—ñ–Ω–∏ —Å—Ç–∞–Ω—É —Å–∫–∞—Å–æ–≤—É—é—Ç—å—Å—è, –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –º–æ–∂–µ –±—É—Ç–∏ –ø–æ–≤–µ—Ä–Ω–µ–Ω–µ –≤–∏–∫–ª–∏–∫–∞—á—É. –¶–µ –∑–∞—Ö–∏—Å—Ç –≤—ñ–¥ –Ω–µ–≤–∞–ª—ñ–¥–Ω–∏—Ö –≤–≤–æ–¥—ñ–≤ —ñ –ø–æ—Ä—É—à–µ–Ω–Ω—è —ñ–Ω–≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É.

---

**–ü3.** –©–æ —Ç–∞–∫–µ `msg.sender` —ñ —è–∫ –π–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å –¥–ª—è "–æ–¥–∏–Ω –≥–æ–ª–æ—Å –Ω–∞ –∞–¥—Ä–µ—Å—É"?

**–í3.** `msg.sender` ‚Äî –∞–¥—Ä–µ—Å–∞ (–∞–∫–∞—É–Ω—Ç –∞–±–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç), —è–∫–∞ –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –≤–∏–∫–ª–∏–∫–∞–ª–∞ –ø–æ—Ç–æ—á–Ω—É —Ñ—É–Ω–∫—Ü—ñ—é. –î–ª—è –æ–±–º–µ–∂–µ–Ω–Ω—è "–æ–¥–∏–Ω –≥–æ–ª–æ—Å –Ω–∞ –∞–¥—Ä–µ—Å—É" –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å mapping (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `mapping(address => bool) hasVoted`) —ñ –ø–µ—Ä–µ–¥ –∑–∞—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º –≥–æ–ª–æ—Å—É –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å `require(!hasVoted[msg.sender])`, –ø—ñ—Å–ª—è —á–æ–≥–æ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—é—Ç—å `hasVoted[msg.sender] = true`.

---

**–ü4.** –£ —á–æ–º—É —Ä—ñ–∑–Ω–∏—Ü—è –º—ñ–∂ —Ñ—É–Ω–∫—Ü—ñ—è–º–∏ view/pure —ñ —Ñ—É–Ω–∫—Ü—ñ—è–º–∏, —â–æ –∑–º—ñ–Ω—é—é—Ç—å —Å—Ç–∞–Ω?

**–í4.** `view`: —Ñ—É–Ω–∫—Ü—ñ—è –ª–∏—à–µ —á–∏—Ç–∞—î —Å—Ç–∞–Ω, –Ω–µ –∑–º—ñ–Ω—é—î –π–æ–≥–æ; –≤–∏–∫–ª–∏–∫ –∑–∑–æ–≤–Ω—ñ –Ω–µ –ø–æ—Ç—Ä–µ–±—É—î —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó (–Ω–µ —Å–ø–ª–∞—á—É—î—Ç—å—Å—è –≥–∞–∑). `pure`: –Ω–µ —á–∏—Ç–∞—î —ñ –Ω–µ –∑–º—ñ–Ω—é—î —Å—Ç–∞–Ω, –ª–∏—à–µ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è. –§—É–Ω–∫—Ü—ñ—ó –±–µ–∑ view/pure –º–æ–∂—É—Ç—å –∑–º—ñ–Ω—é–≤–∞—Ç–∏ storage; —ó—Ö –≤–∏–∫–ª–∏–∫ ‚Äî —Ü–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—è, —â–æ —Å–ø–ª–∞—á—É—î—Ç—å—Å—è –≥–∞–∑–æ–º.

---

**–ü5.** –©–æ —Ç–∞–∫–µ reentrancy —ñ —è–∫–∏–π –ø–∞—Ç–µ—Ä–Ω –∑–∞—Ö–∏—â–∞—î –≤—ñ–¥ –Ω—å–æ–≥–æ?

**–í5.** Reentrancy ‚Äî –≤–∏–ø–∞–¥–æ–∫, –∫–æ–ª–∏ –ø—ñ–¥ —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –≤–∞—à–æ–≥–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É –≤–∏ —Ä–æ–±–∏—Ç–µ –∑–æ–≤–Ω—ñ—à–Ω—ñ–π –≤–∏–∫–ª–∏–∫ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –ø–µ—Ä–µ–∫–∞–∑ ETH), –∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç-–æ–¥–µ—Ä–∂—É–≤–∞—á —É callback –∑–Ω–æ–≤—É –≤–∏–∫–ª–∏–∫–∞—î –≤–∞—à—É —Ñ—É–Ω–∫—Ü—ñ—é. –Ø–∫—â–æ —Å—Ç–∞–Ω –æ–Ω–æ–≤–ª–µ–Ω–æ –ø—ñ—Å–ª—è –ø–µ—Ä–µ–∫–∞–∑—É, –≤—ñ–Ω –º–æ–∂–µ —â–µ –º–∞—Ç–∏ "—Å—Ç–∞—Ä—ñ" –∑–Ω–∞—á–µ–Ω–Ω—è, —ñ –∞—Ç–∞–∫—É—é—á–∏–π –º–æ–∂–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ –æ—Ç—Ä–∏–º–∞—Ç–∏ –∫–æ—à—Ç–∏. –ó–∞—Ö–∏—Å—Ç: –ø–∞—Ç–µ—Ä–Ω Checks-Effects-Interactions ‚Äî —Å–ø–æ—á–∞—Ç–∫—É –æ–Ω–æ–≤–∏—Ç–∏ –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π —Å—Ç–∞–Ω, –ø–æ—Ç—ñ–º —Ä–æ–±–∏—Ç–∏ –∑–æ–≤–Ω—ñ—à–Ω—ñ –≤–∏–∫–ª–∏–∫–∏; –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –º–æ–¥–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∏ —Ç–∏–ø—É nonReentrant.

---

## üéì –Ü–Ω–∂–µ–Ω–µ—Ä–Ω–∏–π –º—ñ–Ω—ñ-–∫–µ–π—Å (–Ω–∞ 1 –±–∞–ª)

–í–∏ –ø—Ä–æ–≤–æ–¥–∏—Ç–µ –∞—É–¥–∏—Ç —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—É –±—ñ—Ä–∂—ñ. –í–∏ –±–∞—á–∏—Ç–µ —Ç–∞–∫–∏–π –∫–æ–¥ —Ñ—É–Ω–∫—Ü—ñ—ó –≤–∏–≤–µ–¥–µ–Ω–Ω—è –∫–æ—à—Ç—ñ–≤:
```solidity
function withdraw(uint amount) public {
    require(balances[msg.sender] >= amount, "Not enough funds");
    msg.sender.call{value: amount}("");
    balances[msg.sender] -= amount;
}
```
**–ü–∏—Ç–∞–Ω–Ω—è:** –Ø–∫–µ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–µ –ø—Ä–∞–≤–∏–ª–æ –±–µ–∑–ø–µ–∫–∏ —Ç—É—Ç –ø–æ—Ä—É—à–µ–Ω–æ —ñ —è–∫ –Ω–∞–∑–∏–≤–∞—î—Ç—å—Å—è –∞—Ç–∞–∫–∞, —è–∫–∞ –¥–æ–∑–≤–æ–ª–∏—Ç—å —Ö–∞–∫–µ—Ä—É –≤–∏–≤–µ—Å—Ç–∏ –≤—Å—ñ –≥—Ä–æ—à—ñ –∑ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É?
